(this.webpackJsonprvc=this.webpackJsonprvc||[]).push([[0],{58:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(14),i=n.n(a),o=(n(58),n(13)),s=n(104),u=n(9),l=n.n(u),d=n(51),j=n(18),b=n(19),f={mode:"rtc",codec:"vp8",appId:"22441ee31b92425fb89f853edc596844",token:"00622441ee31b92425fb89f853edc596844IADDvxxJslvnP1H2YHuOzzYe6LxJSraQV6ehN9+jd4/BIGTNKL8AAAAAEADC2ctrLis+YQEAAQAwKz5h"},h=Object(b.createClient)(f),O=Object(b.createMicrophoneAndCameraTracks)(),x="main",p=n(103),v=n(28),k=n(46),m=n.n(k),y=n(47),g=n.n(y),A=n(48),w=n.n(A),C=n(49),I=n.n(C),S=n(50),T=n.n(S),E=n(2),J=function(e){var t=e.tracks,n=e.setStart,r=e.setInCall,a=Object(c.useState)({video:!0,audio:!0}),i=Object(o.a)(a,2),u=i[0],d=i[1],b=h(),f=function(){var e=Object(j.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("audio"!=n){e.next=6;break}return e.next=3,t[0].setEnabled(!u.audio);case 3:d((function(e){return Object(v.a)(Object(v.a)({},e),{},{audio:!e.audio})})),e.next=10;break;case 6:if("video"!=n){e.next=10;break}return e.next=9,t[1].setEnabled(!u.audio);case 9:d((function(e){return Object(v.a)(Object(v.a)({},e),{},{video:!e.video})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.leave();case 2:b.removeAllListeners(),t[0].close(),t[1].close(),n(!1),r(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(E.jsxs)(p.a,{container:!0,spacing:2,alignItems:"center",children:[Object(E.jsx)(p.a,{item:!0,children:Object(E.jsx)(s.a,{variant:"contained",color:u.audio?"primary":"secondary",onClick:function(){return f("audio")},children:u.audio?Object(E.jsx)(m.a,{}):Object(E.jsx)(g.a,{})})}),Object(E.jsx)(p.a,{item:!0,children:Object(E.jsx)(s.a,{variant:"contained",color:u.video?"primary":"secondary",onClick:function(){return f("video")},children:u.video?Object(E.jsx)(w.a,{}):Object(E.jsx)(I.a,{})})}),Object(E.jsx)(p.a,{item:!0,children:Object(E.jsxs)(s.a,{variant:"contained",color:"default",onClick:function(){return O()},children:["Leave ",Object(E.jsx)(T.a,{})]})})]})},L=function(e){var t=e.users,n=e.tracks,r=Object(c.useState)(12),a=Object(o.a)(r,2),i=a[0],s=a[1];return Object(c.useEffect)((function(){s(Math.max(Math.floor(12/(t.length+1)),4))}),[t,n]),Object(E.jsxs)(p.a,{container:!0,style:{height:"100%"},children:[Object(E.jsx)(p.a,{item:!0,xs:i,children:Object(E.jsx)(b.AgoraVideoPlayer,{videoTrack:n[1],style:{height:"100%",width:"100%"}})}),t.length>0&&t.map((function(e){return e.videoTrack?Object(E.jsx)(p.a,{item:!0,xs:i,children:Object(E.jsx)(b.AgoraVideoPlayer,{videoTrack:e.videoTrack,style:{height:"100%",width:"100%"}},e.uid)}):null}))]})},M=function(e){var t=e.setInCall,n=Object(c.useState)([]),r=Object(o.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(!1),u=Object(o.a)(s,2),b=(u[0],u[1]),v=h(),k=O(),m=k.ready,y=k.tracks;return Object(c.useEffect)((function(){var e=function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.on("user-published",function(){var e=Object(j.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.subscribe(t,n);case 2:"video"===n&&i((function(e){return[].concat(Object(d.a)(e),[t])})),"audio"===n&&t.audioTrack.play();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),v.on("user-unpublished",(function(e,t){"audio"===t&&e.audioTrack&&e.audioTrack.stop(),"video"===t&&i((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),v.on("user-left",(function(e){i((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),e.prev=3,e.next=6,v.join(f.appId,t,f.token,null);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:if(!y){e.next=14;break}return e.next=14,v.publish([y[0],y[1]]);case 14:b(!0);case 15:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}();if(m&&y)try{e(x)}catch(t){console.log(t)}}),[x,v,m,y]),Object(E.jsxs)(p.a,{container:!0,direction:"column",style:{height:"100%"},children:[Object(E.jsx)(p.a,{item:!0,style:{height:"5%"},children:m&&y&&Object(E.jsx)(J,{tracks:y,setStart:b,setInCall:t})}),Object(E.jsx)(p.a,{item:!0,style:{height:"95%"},children:m&&y&&Object(E.jsx)(L,{tracks:y,users:a})})]})},z=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(E.jsxs)("div",{className:"App",style:{height:"100%"},children:[Object(E.jsx)(s.a,{variant:"contained",color:"primary",onClick:function(){return r(!0)},children:"Join Call"}),n?Object(E.jsx)(M,{setInCall:r}):"Waiting to join call!"]})};i.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(z,{})}),document.getElementById("root"))}},[[89,1,2]]]);
//# sourceMappingURL=main.59d34fe5.chunk.js.map